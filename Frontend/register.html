<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register</title>
    <link rel="stylesheet" href="register.css">
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="dashboard.css">
    <!-- <link rel="stylesheet" href="login.css.css"> -->
</head>
<body>
    <nav>
        <div id="top">
            <a href="./index.html">Home</a>
        
        
        
            <a href="./login.html"id="login">Login</a>
           
        </div>
    </nav>
    
    <div id="main">
        <h1>Register Here </h1>
        <h2>Username</h2>
        <input type="text" name="username" id="username" placeholder="Enter your username">
        <h2>Email</h2>
        <input type="text" id="email" placeholder="Enter your Email">
        <h2>Password</h2>
        <input type="password" id="password" placeholder="Enter your Password">
        <button id="signup">Sign up</button>
        <div id="status"></div>
        <p>Already have an account? <a href="./login.html">Login</a></p>
    </div>
</body>
<script>
    let username = document.getElementById("username");
    let email = document.getElementById("email");
    let password = document.getElementById("password");
    let signup = document.getElementById("signup");
    let status_msg = document.getElementById("status")

    signup.addEventListener('click',async()=>{
        let payload={
            "email":email.value,
            "username":username.value,
            "password":password.value
        }
        console.log(payload)
        try {
            let res =await fetch("https://notesapi-jpgf.onrender.com/users/register",{
                method:"POST",
                headers:{
                    "Content-type":"application/json"
                },
                body:JSON.stringify(payload)
            })
            if(res.status ==200){
                let data = await res.json();
                status_msg.setAttribute("style","color:green")
                status_msg.innerText = "Registered Successfully . Redirecting to Login......."
                console.log(data);
                setTimeout(()=>{
                    window.location.href ="./login.html"
                },3000)
            }
            
        } catch (error) {
            console.log(error)
        }
    })

</script>
</html>